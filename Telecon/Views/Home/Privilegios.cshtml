@model Telecon.Models.Settings
@{
    Layout = "~/Views/Estructura/_Forma.cshtml";
    Page.Title = "Telecon Erickson C.A - Administración de privilegios";
}

<div class="PanelPrivilegios">
    @using (@Html.BeginForm("Privilegios", "Home", FormMethod.Post, new { id = "privileges-form" } ))
    {
        @Html.AntiForgeryToken()
        <h2>CONTROL DE PRIVILEGIOS</h2>
        <hr />
        <table class="TablaEditar" border="1">
            <tr>
                <td>FOTOS DE PERFIL</td>
                <td>
                    <label class="switch">
                        @if (Model == null || Model.fotosPerfil == null || Model.fotosPerfil == true)
                        {
                        <input type="checkbox" value="true" name="profilePics" checked>
                        }
                        @if (Model != null && Model.fotosPerfil == false)
                        {
                        <input type="checkbox" value="true" name="profilePics">
                        }
                        <span class="slider round"></span>
                    </label>
                </td>
            </tr>
            <tr>
                <td>PERMITIR CAMBIO DE CONTRASEÑA</td>
                <td>
                    <label class="switch">
                        @if (Model == null || Model.cambioContraseña == null || Model.cambioContraseña == true)
                        {
                            <input type="checkbox" value="true" name="passwordChange" checked>
                        }
                        @if (Model != null && Model.cambioContraseña == false)
                        {
                            <input type="checkbox" value="true" name="passwordChange">
                        }
                        <span class="slider round"></span>
                    </label>
                </td>
            </tr>
            <tr>
                <td>PERMITIR CAMBIO DE CORREO</td>
                <td>
                    <label class="switch">
                        @if (Model == null || Model.cambioCorreo == null || Model.cambioCorreo == true)
                        {
                            <input type="checkbox" value="true" name="emailChange" checked>
                        }
                        @if (Model != null && Model.cambioCorreo == false)
                        {
                            <input type="checkbox" value="true" name="emailChange">
                        }
                        <span class="slider round"></span>
                    </label>
                </td>
            </tr>
            <tr>
                <td>PERMITIR ACCESO DE USUARIO</td>
                <td>
                    <label class="switch">
                        @if (Model == null || Model.accesoUsuario == null || Model.accesoUsuario == true)
                        {
                            <input type="checkbox" value="true" name="userAccess" checked>
                        }
                        @if (Model != null && Model.accesoUsuario == false)
                        {
                            <input type="checkbox" value="true" name="userAccess">
                        }
                        <span class="slider round"></span>
                    </label>
                </td>
            </tr>
        </table>

        <button type="submit" onclick="return ActualizarPrivilegios();">ACEPTAR</button>
        <button type="button" id="ReturnButton" onclick="Return();">REGRESAR</button>
    }


</div>

<div id="validacion" class="modal fade" tabindex="-1" role="dialog">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <button id="cerrar-validacion" type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">x</span>
                </button>
            </div>
            <div id="validaciones-contenido" class="modal-body">


            </div>
            <div class="modal-footer">

            </div>
        </div>
    </div>
</div>

<script type="text/javascript">
    document.getElementById("main-admin-button").style.visibility = "visible";

    var divtext = document.getElementById("validaciones-contenido");

    function ActualizarPrivilegios() {
        divtext.innerHTML = "<p>Privilegios actualizados exitosamente.</p>\n";
        $('.modal-header').css('background-color', 'blue');
        $('.modal-footer').css('background-color', 'blue');
        $('#validacion').modal('show');
        setTimeout(function () {
            $("#cerrar-validacion").click();
            document.getElementById("privileges-form").submit();
        }, 2000); // <-- time in milliseconds
        return false;
    }

    function Return() {
        window.location.href = "/es/admin";
    }

    function Español() {
        window.location.href = "/es/admin/privilegios";
    }

    function English() {
        window.location.href = "/en/admin/privileges";
    }

</script>


